NODE_ID=pi-1              

# --- GPIO / sampling ---
GPIO_PIN=18
EDGE_MODE=RISING              # RISING | FALLING | BOTH
DEBOUNCE_US=0                 # microseconds (e.g., 1000 to filter glitches)
TIME_WINDOW_SEC=10            # M2 default window length (seconds)
REF_WINDOW_PULSES=100         # Z-ring size (N)
QUALITY_JITTER_TAU=0.005      # jitter CV threshold for quality=OK (e.g., 0.005 = 0.5%)

# --- Mock input ---
FORCE_MOCK=1           # <— turn on software pulse source
MOCK_HZ=10.0           # target pulse frequency for the mock
MOCK_JITTER=0.02       # 0.02 = ~2% timing noise (set 0.0 for super clean)

# --- DEMO mode ---
DEMO_ON=0               # 1=enable demo mode (PPM_LIMIT = 3000)

# --- Data / CSV rotation & Excel helper ---
DATA_DIR=./data
MAX_CSV_BYTES=10485760        # 10 MB
BACKUP_COUNT=5
CSV_EXCEL_SEP=0               # 1 -> prepend "sep=," for easier Excel import

# --- Z-telegram / Peer transport ---
Z_SEND_ENABLED=1
Z_SEND_INTERVAL_SEC=1
Z_SEND_HOST=255.255.255.255   # default broadcast; ignored if PEER_LIST set
Z_SEND_PORT=9787
PEER_LIST=
PEER_BIND=0.0.0.0             # UDP listen bind

# --- Web server ---
HOST=0.0.0.0
PORT=8000

# --- Calibration (Si5351A) ---
RATE_TARGET=10.000            # Hz; local target (used if peer-lock OFF)
CAL_ON=0                      # 1=enable closed-loop calibration, 0=off
CAL_KP=200000                 # proportional gain (ppm per 1.0 normalized error)
CAL_KI=20000                  # integral gain (ppm per 1.0 normalized error*window ratio)
PPM_LIMIT=200                 # clamp ±ppm for trims
PEER_LOCK_ON=0                # 1=lock to best peer rate (overrides RATE_TARGET)

# --- Si5351A I²C (PoC-safe) ---
SI5351_DRYRUN=1               # 1=no actual I²C writes (safe for dev)
SI5351_XTAL_HZ=25000000       # crystal reference (Hz)

# --- Future backend switch (kept for completeness; lgpio is used in M2) ---
GPIO_BACKEND=lgpio